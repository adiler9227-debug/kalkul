<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –®–≤–µ–π–Ω–æ–≥–æ –¶–µ—Ö–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 0.8s ease;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            animation: slideUp 0.6s ease;
        }

        .card-header {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2d3748;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .input-field {
            display: flex;
            flex-direction: column;
        }

        .input-field label {
            font-size: 0.9rem;
            font-weight: 500;
            color: #4a5568;
            margin-bottom: 8px;
        }

        .input-field input {
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .input-field input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .materials-table, .operations-table, .admin-table {
            width: 100%;
            margin-top: 15px;
        }

        .materials-table th, .operations-table th, .admin-table th {
            background: #f7fafc;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #2d3748;
            border-bottom: 2px solid #e2e8f0;
        }

        .materials-table td, .operations-table td, .admin-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #e2e8f0;
        }

        .materials-table input, .operations-table input, .admin-table input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 0.95rem;
        }

        .btn-add {
            background: #48bb78;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .btn-add:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(72, 187, 120, 0.3);
        }

        .btn-remove {
            background: #f56565;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .results {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            animation: slideUp 0.8s ease;
        }

        .results h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .result-item {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .result-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .final-price {
            background: rgba(255,255,255,0.25);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-top: 20px;
            backdrop-filter: blur(10px);
        }

        .final-price .label {
            font-size: 1.2rem;
            margin-bottom: 10px;
            opacity: 0.95;
        }

        .final-price .value {
            font-size: 3rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .save-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }

        .save-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .input-group {
                grid-template-columns: 1fr;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏</h1>
            <p>–ü—Ä–æ—Å—Ç–æ–π —Ä–∞—Å—á—ë—Ç –¥–ª—è —à–≤–µ–π–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</p>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã -->
        <div class="card">
            <div class="card-header">‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã</div>
            <div class="input-group">
                <div class="input-field">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏—è</label>
                    <input type="text" id="productName" value="–ü–µ—Å–æ—á–Ω–∏–∫ –¥–µ—Ç—Å–∫–∏–π">
                </div>
                <div class="input-field">
                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–¥–µ–ª–∏–π –≤ –º–µ—Å—è—Ü</label>
                    <input type="number" id="monthlyQuantity" value="4500" oninput="calculate()">
                </div>
                <div class="input-field">
                    <label>–ñ–µ–ª–∞–µ–º–∞—è –º–∞—Ä–∂–∞ (%)</label>
                    <input type="number" id="marginPercent" value="20" oninput="calculate()">
                </div>
                <div class="input-field">
                    <label>–ö—É—Ä—Å –¥–æ–ª–ª–∞—Ä–∞ (—Å–æ–º)</label>
                    <input type="number" id="usdRate" value="87.8" step="0.1" oninput="calculate()">
                </div>
            </div>
        </div>

        <!-- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã -->
        <div class="card">
            <div class="card-header">üßµ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –°—ã—Ä—å—ë</div>
            <table class="materials-table">
                <thead>
                    <tr>
                        <th style="width: 30%">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th style="width: 15%">–†–∞—Å—Ö–æ–¥</th>
                        <th style="width: 15%">–ï–¥.–∏–∑–º.</th>
                        <th style="width: 15%">–¶–µ–Ω–∞</th>
                        <th style="width: 10%">–í USD?</th>
                        <th style="width: 15%">–°—É–º–º–∞</th>
                        <th style="width: 5%"></th>
                    </tr>
                </thead>
                <tbody id="materialsTable">
                    <tr>
                        <td><input type="text" value="–¢–∫–∞–Ω—å –æ—Å–Ω–æ–≤–Ω–∞—è" oninput="calculate()"></td>
                        <td><input type="number" value="2.3" step="0.1" oninput="calculate()"></td>
                        <td><input type="text" value="–º"></td>
                        <td><input type="number" value="2.0" step="0.1" oninput="calculate()"></td>
                        <td><input type="checkbox" checked onchange="calculate()"></td>
                        <td><span class="material-sum">403.48</span></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'materialsTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–£–ø–∞–∫–æ–≤–æ—á–Ω—ã–π –ø–∞–∫–µ—Ç" oninput="calculate()"></td>
                        <td><input type="number" value="1" step="0.1" oninput="calculate()"></td>
                        <td><input type="text" value="—à—Ç"></td>
                        <td><input type="number" value="5" step="0.1" oninput="calculate()"></td>
                        <td><input type="checkbox" onchange="calculate()"></td>
                        <td><span class="material-sum">5.00</span></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'materialsTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–ù–∏—Ç–∫–∏" oninput="calculate()"></td>
                        <td><input type="number" value="1" step="0.1" oninput="calculate()"></td>
                        <td><input type="text" value="—à—Ç"></td>
                        <td><input type="number" value="1" step="0.1" oninput="calculate()"></td>
                        <td><input type="checkbox" onchange="calculate()"></td>
                        <td><span class="material-sum">1.00</span></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'materialsTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–†–µ–∑–∏–Ω–∫–∞" oninput="calculate()"></td>
                        <td><input type="number" value="1" step="0.1" oninput="calculate()"></td>
                        <td><input type="text" value="–º"></td>
                        <td><input type="number" value="3" step="0.1" oninput="calculate()"></td>
                        <td><input type="checkbox" onchange="calculate()"></td>
                        <td><span class="material-sum">3.00</span></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'materialsTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–ë–∏—Ä–∫–∞" oninput="calculate()"></td>
                        <td><input type="number" value="1" step="0.1" oninput="calculate()"></td>
                        <td><input type="text" value="—à—Ç"></td>
                        <td><input type="number" value="2" step="0.1" oninput="calculate()"></td>
                        <td><input type="checkbox" onchange="calculate()"></td>
                        <td><span class="material-sum">2.00</span></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'materialsTable')">‚úï</button></td>
                    </tr>
                </tbody>
            </table>
            <button class="btn-add" onclick="addMaterialRow()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</button>
        </div>

        <!-- –°–¥–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã -->
        <div class="card">
            <div class="card-header">‚úÇÔ∏è –°–¥–µ–ª—å–Ω—ã–µ –†–∞–±–æ—Ç—ã</div>
            <table class="operations-table">
                <thead>
                    <tr>
                        <th style="width: 70%">–û–ø–µ—Ä–∞—Ü–∏—è</th>
                        <th style="width: 25%">–°—Ç–æ–∏–º–æ—Å—Ç—å (—Å–æ–º)</th>
                        <th style="width: 5%"></th>
                    </tr>
                </thead>
                <tbody id="operationsTable">
                    <tr>
                        <td><input type="text" value="–ü—Ä—è–º–æ—Å—Ç—Ä–æ—á–∫–∞" oninput="calculate()"></td>
                        <td><input type="number" value="65" step="0.1" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'operationsTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–ö—Ä–æ–π" oninput="calculate()"></td>
                        <td><input type="number" value="10" step="0.1" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'operationsTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–ß–∏—Å—Ç–∫–∞" oninput="calculate()"></td>
                        <td><input type="number" value="2" step="0.1" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'operationsTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–£–ø–∞–∫–æ–≤–∫–∞" oninput="calculate()"></td>
                        <td><input type="number" value="4" step="0.1" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'operationsTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–û–¢–ö" oninput="calculate()"></td>
                        <td><input type="number" value="3" step="0.1" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'operationsTable')">‚úï</button></td>
                    </tr>
                </tbody>
            </table>
            <button class="btn-add" onclick="addOperationRow()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</button>
        </div>

        <!-- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã -->
        <div class="card">
            <div class="card-header">üè¢ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –†–∞—Å—Ö–æ–¥—ã (–≤ –º–µ—Å—è—Ü)</div>
            <table class="admin-table">
                <thead>
                    <tr>
                        <th style="width: 70%">–°—Ç–∞—Ç—å—è —Ä–∞—Å—Ö–æ–¥–æ–≤</th>
                        <th style="width: 25%">–°—É–º–º–∞ (—Å–æ–º/–º–µ—Å—è—Ü)</th>
                        <th style="width: 5%"></th>
                    </tr>
                </thead>
                <tbody id="adminTable">
                    <tr>
                        <td><input type="text" value="–û–∫–ª–∞–¥—ã" oninput="calculate()"></td>
                        <td><input type="number" value="245000" step="100" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'adminTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–ê—Ä–µ–Ω–¥–∞" oninput="calculate()"></td>
                        <td><input type="number" value="50000" step="100" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'adminTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–ö–æ–º–º—É–Ω–∞–ª–∫–∞" oninput="calculate()"></td>
                        <td><input type="number" value="10000" step="100" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'adminTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–ë–µ–Ω–∑–∏–Ω" oninput="calculate()"></td>
                        <td><input type="number" value="15000" step="100" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'adminTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–î–æ—Å—Ç–∞–≤–∫–∞/–¢–∞–∫—Å–∏" oninput="calculate()"></td>
                        <td><input type="number" value="2000" step="100" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'adminTable')">‚úï</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥" oninput="calculate()"></td>
                        <td><input type="number" value="90000" step="100" oninput="calculate()"></td>
                        <td><button class="btn-remove" onclick="removeRow(this, 'adminTable')">‚úï</button></td>
                    </tr>
                </tbody>
            </table>
            <button class="btn-add" onclick="addAdminRow()">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é —Ä–∞—Å—Ö–æ–¥–æ–≤</button>
        </div>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div class="results">
            <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –†–∞—Å—á—ë—Ç–∞</h2>
            <div class="result-grid">
                <div class="result-item">
                    <div class="result-label">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–∞ 1 —à—Ç:</div>
                    <div class="result-value" id="resultMaterials">0 —Å–æ–º</div>
                </div>
                <div class="result-item">
                    <div class="result-label">–°–¥–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã:</div>
                    <div class="result-value" id="resultOperations">0 —Å–æ–º</div>
                </div>
                <div class="result-item">
                    <div class="result-label">–ê–¥–º–∏–Ω —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 1 —à—Ç:</div>
                    <div class="result-value" id="resultAdmin">0 —Å–æ–º</div>
                </div>
                <div class="result-item">
                    <div class="result-label">–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å:</div>
                    <div class="result-value" id="resultCost">0 —Å–æ–º</div>
                </div>
                <div class="result-item">
                    <div class="result-label">–ú–∞—Ä–∂–∞:</div>
                    <div class="result-value" id="resultMargin">0 —Å–æ–º</div>
                </div>
            </div>
            <div class="final-price">
                <div class="label">üíµ –ò–¢–û–ì–û–í–ê–Ø –¶–ï–ù–ê:</div>
                <div class="value" id="finalPrice">0 —Å–æ–º</div>
            </div>
            <button class="save-btn" onclick="saveData()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—á—ë—Ç –≤ —Ñ–∞–π–ª</button>
        </div>
    </div>

    <script>
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            calculate();
        };

        function calculate() {
            const usdRate = parseFloat(document.getElementById('usdRate').value) || 0;
            const monthlyQuantity = parseFloat(document.getElementById('monthlyQuantity').value) || 1;
            const marginPercent = parseFloat(document.getElementById('marginPercent').value) || 0;

            // –†–∞—Å—á—ë—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
            let totalMaterials = 0;
            const materialRows = document.querySelectorAll('#materialsTable tr');
            materialRows.forEach(row => {
                const inputs = row.querySelectorAll('input');
                const quantity = parseFloat(inputs[1].value) || 0;
                const price = parseFloat(inputs[3].value) || 0;
                const isUSD = inputs[4].checked;
                
                let sum = quantity * price;
                if (isUSD) {
                    sum *= usdRate;
                }
                
                totalMaterials += sum;
                row.querySelector('.material-sum').textContent = sum.toFixed(2);
            });

            // –†–∞—Å—á—ë—Ç —Å–¥–µ–ª—å–Ω—ã—Ö —Ä–∞–±–æ—Ç
            let totalOperations = 0;
            const operationRows = document.querySelectorAll('#operationsTable tr');
            operationRows.forEach(row => {
                const priceInput = row.querySelectorAll('input')[1];
                const price = parseFloat(priceInput.value) || 0;
                totalOperations += price;
            });

            // –†–∞—Å—á—ë—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
            let totalAdmin = 0;
            const adminRows = document.querySelectorAll('#adminTable tr');
            adminRows.forEach(row => {
                const priceInput = row.querySelectorAll('input')[1];
                const price = parseFloat(priceInput.value) || 0;
                totalAdmin += price;
            });

            const adminPerUnit = totalAdmin / monthlyQuantity;

            // –ò—Ç–æ–≥–æ–≤—ã–π —Ä–∞—Å—á—ë—Ç
            const totalCost = totalMaterials + totalOperations + adminPerUnit;
            const margin = totalCost * (marginPercent / 100);
            const finalPrice = totalCost + margin;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.getElementById('resultMaterials').textContent = totalMaterials.toFixed(2) + ' —Å–æ–º';
            document.getElementById('resultOperations').textContent = totalOperations.toFixed(2) + ' —Å–æ–º';
            document.getElementById('resultAdmin').textContent = adminPerUnit.toFixed(2) + ' —Å–æ–º';
            document.getElementById('resultCost').textContent = totalCost.toFixed(2) + ' —Å–æ–º';
            document.getElementById('resultMargin').textContent = margin.toFixed(2) + ' —Å–æ–º';
            document.getElementById('finalPrice').textContent = finalPrice.toFixed(2) + ' —Å–æ–º';
        }

        function addMaterialRow() {
            const table = document.getElementById('materialsTable');
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" value="–ù–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª" oninput="calculate()"></td>
                <td><input type="number" value="1" step="0.1" oninput="calculate()"></td>
                <td><input type="text" value="—à—Ç"></td>
                <td><input type="number" value="0" step="0.1" oninput="calculate()"></td>
                <td><input type="checkbox" onchange="calculate()"></td>
                <td><span class="material-sum">0.00</span></td>
                <td><button class="btn-remove" onclick="removeRow(this, 'materialsTable')">‚úï</button></td>
            `;
            calculate();
        }

        function addOperationRow() {
            const table = document.getElementById('operationsTable');
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" value="–ù–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è" oninput="calculate()"></td>
                <td><input type="number" value="0" step="0.1" oninput="calculate()"></td>
                <td><button class="btn-remove" onclick="removeRow(this, 'operationsTable')">‚úï</button></td>
            `;
            calculate();
        }

        function addAdminRow() {
            const table = document.getElementById('adminTable');
            const newRow = table.insertRow();
            newRow.innerHTML = `
                <td><input type="text" value="–ù–æ–≤–∞—è —Å—Ç–∞—Ç—å—è" oninput="calculate()"></td>
                <td><input type="number" value="0" step="100" oninput="calculate()"></td>
                <td><button class="btn-remove" onclick="removeRow(this, 'adminTable')">‚úï</button></td>
            `;
            calculate();
        }

        function removeRow(button, tableId) {
            const row = button.closest('tr');
            row.remove();
            calculate();
        }

        function saveData() {
            const productName = document.getElementById('productName').value;
            const finalPrice = document.getElementById('finalPrice').textContent;
            
            let data = `–ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –°–ï–ë–ï–°–¢–û–ò–ú–û–°–¢–ò\n`;
            data += `–î–∞—Ç–∞: ${new Date().toLocaleDateString('ru-RU')}\n\n`;
            data += `–ò–∑–¥–µ–ª–∏–µ: ${productName}\n`;
            data += `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –º–µ—Å—è—Ü: ${document.getElementById('monthlyQuantity').value}\n`;
            data += `–ú–∞—Ä–∂–∞: ${document.getElementById('marginPercent').value}%\n`;
            data += `–ö—É—Ä—Å USD: ${document.getElementById('usdRate').value} —Å–æ–º\n\n`;
            
            data += `–ú–ê–¢–ï–†–ò–ê–õ–´:\n`;
            document.querySelectorAll('#materialsTable tr').forEach((row, i) => {
                const inputs = row.querySelectorAll('input');
                data += `${i+1}. ${inputs[0].value} - ${inputs[1].value} ${inputs[2].value} √ó ${inputs[3].value} ${inputs[4].checked ? 'USD' : '—Å–æ–º'} = ${row.querySelector('.material-sum').textContent} —Å–æ–º\n`;
            });
            
            data += `\n–°–î–ï–õ–¨–ù–´–ï –†–ê–ë–û–¢–´:\n`;
            document.querySelectorAll('#operationsTable tr').forEach((row, i) => {
                const inputs = row.querySelectorAll('input');
                data += `${i+1}. ${inputs[0].value} - ${inputs[1].value} —Å–æ–º\n`;
            });
            
            data += `\n–ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–ò–í–ù–´–ï –†–ê–°–•–û–î–´:\n`;
            document.querySelectorAll('#adminTable tr').forEach((row, i) => {
                const inputs = row.querySelectorAll('input');
                data += `${i+1}. ${inputs[0].value} - ${inputs[1].value} —Å–æ–º/–º–µ—Å\n`;
            });
            
            data += `\n${'='.repeat(50)}\n`;
            data += `–†–ï–ó–£–õ–¨–¢–ê–¢–´:\n`;
            data += `–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–∞ 1 —à—Ç: ${document.getElementById('resultMaterials').textContent}\n`;
            data += `–°–¥–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã: ${document.getElementById('resultOperations').textContent}\n`;
            data += `–ê–¥–º–∏–Ω —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 1 —à—Ç: ${document.getElementById('resultAdmin').textContent}\n`;
            data += `–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: ${document.getElementById('resultCost').textContent}\n`;
            data += `–ú–∞—Ä–∂–∞: ${document.getElementById('resultMargin').textContent}\n`;
            data += `\n–ò–¢–û–ì–û–í–ê–Ø –¶–ï–ù–ê: ${finalPrice}\n`;
            
            const blob = new Blob([data], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å_${productName}_${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            alert('‚úÖ –†–∞—Å—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ —Ñ–∞–π–ª!');
        }
    </script>
</body>
</html>